{% extends 'base.html' %}

{% block title %}MaricaCity - Descubra o Turismo Local{% endblock %}

{% block content %}
<!-- Hero Banner Section with Embedded Navigation -->
<div class="relative bg-gradient-to-br from-gray-700 via-gray-600 to-gray-800 text-white overflow-hidden" style="min-height: 500px;">
    <!-- Background overlay -->
    <div class="absolute inset-0 bg-black bg-opacity-40"></div>

    <!-- Navigation Bar (embedded in hero) -->
    <nav class="relative z-20">
        <div class="mx-auto px-8 py-4">
            <div class="flex justify-between items-center">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="{% url 'core:landing' %}" class="text-xl font-bold text-white uppercase tracking-wider">
                        MaricaCity
                    </a>
                </div>

                <!-- Right side navigation (moved to right edge) -->
                <div class="flex items-center space-x-6">
                    <!-- Main Navigation Links -->
                    <a href="{% url 'core:landing' %}" class="text-white hover:text-gray-300 text-sm uppercase tracking-wide transition-colors">
                        Início
                    </a>
                    <a href="{% url 'explore:explore' %}" class="text-white hover:text-gray-300 text-sm uppercase tracking-wide transition-colors">
                        Explorar
                    </a>

                    {% if user.is_authenticated %}
                        {% if user.can_create_places %}
                            <a href="#" class="text-white hover:text-gray-300 text-sm uppercase tracking-wide transition-colors">
                                Adicionar Lugar
                            </a>
                        {% endif %}
                        {% if user.can_moderate %}
                            <a href="#" class="text-white hover:text-gray-300 text-sm uppercase tracking-wide transition-colors">
                                Admin
                            </a>
                        {% endif %}
                        <span class="text-gray-300 text-sm">{{ user.username }}</span>
                        <a href="{% url 'accounts:logout' %}" class="border-2 border-white px-4 py-2 text-sm uppercase tracking-wide hover:bg-white hover:text-gray-900 transition-all">
                            Sair
                        </a>
                    {% else %}
                        <a href="{% url 'accounts:login' %}" class="text-white hover:text-gray-300 text-sm uppercase tracking-wide transition-colors">
                            Entrar
                        </a>
                        <a href="{% url 'accounts:register' %}" class="border-2 border-white px-4 py-2 text-sm uppercase tracking-wide hover:bg-white hover:text-gray-900 transition-all">
                            Cadastrar
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Content -->
    <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 text-center">
        <div class="inline-block bg-black bg-opacity-50 px-12 py-16 rounded-lg">
            <div class="border-t-2 border-b-2 border-white py-4 px-8 mb-8">
                <h1 class="text-5xl md:text-6xl font-black tracking-widest uppercase">
                    MARICACITY
                </h1>
            </div>

            <p class="text-lg md:text-xl uppercase tracking-wide mb-3">
                Este é <strong class="font-bold">MaricaCity</strong>, uma plataforma
            </p>
            <p class="text-lg md:text-xl uppercase tracking-wide mb-3">
                gratuita para explorar
            </p>
            <p class="text-lg md:text-xl uppercase tracking-wide mb-8">
                o melhor de <strong class="font-bold">Maricá</strong>
            </p>

            <div class="mt-10">
                <a href="#featured" class="inline-block border-2 border-white px-12 py-3 text-lg uppercase tracking-wide hover:bg-white hover:text-gray-900 transition-all duration-300">
                    Saiba Mais
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Trending Places Section -->
{% if trending_places %}
<div class="bg-white py-16" id="trending">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <h2 class="text-4xl font-bold text-gray-900 uppercase tracking-wide">
                Em Alta <span class="text-gray-700">Agora</span>
            </h2>
            <p class="mt-4 text-lg text-gray-600">
                Destinos populares este mês
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            {% for place in trending_places %}
                <div class="bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg hover:border-gray-800 transition-all duration-300">
                    {% if place.primary_image %}
                        <img src="{{ place.primary_image.image.url }}" alt="{{ place.name }}" class="w-full h-48 object-cover">
                    {% else %}
                        <div class="w-full h-48 bg-gray-800 flex items-center justify-center">
                            <span class="text-white text-3xl font-bold">{{ place.name|first }}</span>
                        </div>
                    {% endif %}

                    <div class="p-6">
                        <h3 class="text-lg font-bold text-gray-900 mb-2 uppercase tracking-wide">{{ place.name }}</h3>
                        <p class="text-gray-600 mb-4 text-sm">{{ place.description|truncatewords:15 }}</p>

                        <div class="flex items-center justify-between">
                            <a href="#" class="text-gray-900 hover:text-gray-700 font-medium text-sm tracking-wide border-b-2 border-transparent hover:border-gray-900 transition-all">
                                Saiba Mais →
                            </a>
                            {% if place.categories.exists %}
                                <div class="flex flex-wrap gap-1">
                                    {% for category in place.categories.all|slice:":1" %}
                                        <span class="inline-block bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded">
                                            {{ category.name }}
                                        </span>
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}

<!-- Featured Places Section -->
<div class="bg-gray-50 py-16" id="featured">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <h2 class="text-4xl font-bold text-gray-900 uppercase tracking-wide">Lugares em Destaque</h2>
            <p class="mt-4 text-lg text-gray-600">Destinos adicionados recentemente</p>
        </div>

        {% if featured_places %}
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {% for place in featured_places %}
                    <div class="bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg hover:border-gray-800 transition-all duration-300">
                        {% if place.primary_image %}
                            <img src="{{ place.primary_image.image.url }}" alt="{{ place.name }}" class="w-full h-56 object-cover">
                        {% else %}
                            <div class="w-full h-56 bg-gray-800 flex items-center justify-center">
                                <span class="text-white text-4xl font-bold">{{ place.name|first }}</span>
                            </div>
                        {% endif %}

                        <div class="p-6">
                            <h3 class="text-xl font-bold text-gray-900 mb-3 uppercase tracking-wide">{{ place.name }}</h3>
                            <p class="text-gray-600 mb-4 leading-relaxed">{{ place.description|truncatewords:20 }}</p>

                            <div class="flex items-center justify-between">
                                <a href="#" class="text-gray-900 hover:text-gray-700 font-medium text-sm tracking-wide border-b-2 border-transparent hover:border-gray-900 transition-all">
                                    Ver Detalhes →
                                </a>
                                {% if place.categories.exists %}
                                    <div class="flex flex-wrap gap-1">
                                        {% for category in place.categories.all|slice:":2" %}
                                            <span class="inline-block bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded">
                                                {{ category.name }}
                                            </span>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="text-center py-12">
                <p class="text-gray-600 text-xl">Nenhum lugar disponível ainda. Volte em breve!</p>
                {% if user.is_authenticated and user.can_create_places %}
                    <a href="#" class="mt-4 inline-block bg-gray-900 hover:bg-gray-800 text-white px-8 py-3 rounded-md font-medium uppercase tracking-wide">
                        Adicione Seu Primeiro Lugar
                    </a>
                {% endif %}
            </div>
        {% endif %}

        <!-- View All Link -->
        <div class="text-center mt-12">
            <a href="{% url 'explore:explore' %}" class="inline-block border-2 border-gray-900 text-gray-900 hover:bg-gray-900 hover:text-white px-8 py-3 rounded-md font-medium uppercase tracking-wide transition-all duration-300">
                Ver Todos os Lugares
            </a>
        </div>
    </div>
</div>

<!-- Categories Overview Section -->
<div class="bg-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <h2 class="text-4xl font-bold text-gray-900 uppercase tracking-wide">Explorar por Categoria</h2>
            <p class="mt-4 text-lg text-gray-600">Encontre exatamente o que você procura</p>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            {% load static %}
            {% with categories=categories|default_if_none:"" %}
                {% if categories %}
                    {% for category in categories %}
                        <a href="{% url 'explore:category_detail' category.slug %}" class="bg-gray-50 border-2 border-gray-200 rounded-lg p-8 text-center hover:border-gray-900 hover:shadow-lg transition-all duration-300 group">
                            <div class="text-5xl mb-4">
                                {{ category.icon|default:"📍" }}
                            </div>
                            <h3 class="text-lg font-bold text-gray-900 uppercase tracking-wide">{{ category.name }}</h3>
                            <p class="text-sm text-gray-600 mt-2">{{ category.active_places_count }} lugares</p>
                        </a>
                    {% endfor %}
                {% else %}
                    <!-- Default categories placeholder -->
                    <div class="bg-gray-50 border-2 border-gray-200 rounded-lg p-8 text-center hover:border-gray-900 hover:shadow-lg transition-all duration-300">
                        <div class="text-5xl mb-4">🍽️</div>
                        <h3 class="text-lg font-bold text-gray-900 uppercase tracking-wide">Restaurantes</h3>
                    </div>
                    <div class="bg-gray-50 border-2 border-gray-200 rounded-lg p-8 text-center hover:border-gray-900 hover:shadow-lg transition-all duration-300">
                        <div class="text-5xl mb-4">🎨</div>
                        <h3 class="text-lg font-bold text-gray-900 uppercase tracking-wide">Artes e Cultura</h3>
                    </div>
                    <div class="bg-gray-50 border-2 border-gray-200 rounded-lg p-8 text-center hover:border-gray-900 hover:shadow-lg transition-all duration-300">
                        <div class="text-5xl mb-4">🌳</div>
                        <h3 class="text-lg font-bold text-gray-900 uppercase tracking-wide">Natureza e Parques</h3>
                    </div>
                    <div class="bg-gray-50 border-2 border-gray-200 rounded-lg p-8 text-center hover:border-gray-900 hover:shadow-lg transition-all duration-300">
                        <div class="text-5xl mb-4">🏨</div>
                        <h3 class="text-lg font-bold text-gray-900 uppercase tracking-wide">Hotéis</h3>
                    </div>
                {% endif %}
            {% endwith %}
        </div>
    </div>
</div>

<!-- Join CTA Section with Subtle Red Accent -->
{% if not user.is_authenticated %}
<div class="bg-gray-900 text-white py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-4xl font-bold mb-4 uppercase tracking-wide">Junte-se à Nossa Comunidade</h2>
        <p class="text-xl mb-10 text-gray-300">Descubra lugares incríveis ou compartilhe seus locais favoritos com outros</p>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
            <a href="{% url 'accounts:register' %}" class="inline-block border-2 border-white text-white hover:bg-white hover:text-gray-900 px-10 py-4 rounded-md text-lg font-medium uppercase tracking-wide transition-all duration-300">
                Cadastre-se Agora
            </a>
            <a href="{% url 'accounts:login' %}" class="inline-block bg-white text-gray-900 hover:bg-gray-100 px-10 py-4 rounded-md text-lg font-medium uppercase tracking-wide transition-all duration-300">
                Entrar
            </a>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}
