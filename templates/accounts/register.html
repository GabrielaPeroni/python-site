{% extends 'base.html' %}
{% load static %}

{% block title %}Cadastro - MaricaCity{% endblock %}

{% block content %}
<nav class="navbar navbar-expand-lg navbar-dark bg-dark" style="background: linear-gradient(to right, #374151, #1f2937) !important;">
  <div class="container-fluid px-4">
    <a class="navbar-brand fw-bold text-uppercase" href="{% url 'core:landing' %}">MaricaCity</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link text-uppercase" href="{% url 'explore:explore' %}">Explorar</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-uppercase" href="{% url 'core:about' %}">Sobre</a>
        </li>
        <li class="nav-item">
          <a class="btn btn-outline-light btn-sm text-uppercase ms-2" href="{% url 'accounts:login' %}">Entrar</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="d-flex align-items-center justify-content-center py-5" style="min-height: calc(100vh - 200px);">
  <div class="container" style="max-width: 500px;">
    <div class="text-center mb-5">
      <h2 class="display-6 fw-bold mb-3">Crie sua conta</h2>
      <p class="text-muted">
        Já tem uma conta?
        <a href="{% url 'accounts:login' %}" class="text-decoration-none">Entrar</a>
      </p>
    </div>

    <div class="card shadow">
      <div class="card-body p-4">
        <form method="post">
          {% csrf_token %}

          <div class="mb-3">
            <label for="{{ form.username.id_for_label }}" class="form-label fw-semibold">
              Nome de usuário
            </label>
            {{ form.username }}
            {% if form.username.errors %}
            <div class="text-danger small mt-2">{{ form.username.errors.0 }}</div>
            {% endif %}
          </div>

          <div class="mb-3">
            <label for="{{ form.email.id_for_label }}" class="form-label fw-semibold">
              Endereço de e-mail
            </label>
            {{ form.email }}
            {% if form.email.errors %}
            <div class="text-danger small mt-2">{{ form.email.errors.0 }}</div>
            {% endif %}
          </div>

          <div class="mb-3">
            <label class="form-label fw-semibold">Tipo de conta</label>
            {% for radio in form.user_type %}
            <div class="form-check">
              {{ radio.tag }}
              <label class="form-check-label" for="{{ radio.id_for_label }}">
                {{ radio.choice_label }}
              </label>
            </div>
            {% endfor %}
            {% if form.user_type.errors %}
            <div class="text-danger small mt-2">{{ form.user_type.errors.0 }}</div>
            {% endif %}
          </div>

          <div class="mb-3">
            <label for="{{ form.password1.id_for_label }}" class="form-label fw-semibold">
              Senha
            </label>
            {{ form.password1 }}
            {% if form.password1.errors %}
            <div class="text-danger small mt-2">{{ form.password1.errors.0 }}</div>
            {% endif %}
          </div>

          <div class="mb-3">
            <label for="{{ form.password2.id_for_label }}" class="form-label fw-semibold">
              Confirmar senha
            </label>
            {{ form.password2 }}
            {% if form.password2.errors %}
            <div class="text-danger small mt-2">{{ form.password2.errors.0 }}</div>
            {% endif %}
          </div>

          {% if form.non_field_errors %}
          <div class="alert alert-danger">
            {{ form.non_field_errors.0 }}
          </div>
          {% endif %}

          <div class="d-grid mb-4">
            <button type="submit" class="btn btn-dark btn-lg">Cadastrar</button>
          </div>
        </form>

        <div class="position-relative my-4">
          <hr class="text-muted">
          <span class="position-absolute top-50 start-50 translate-middle bg-white px-3 text-muted small">ou</span>
        </div>

        <div class="text-center">
          <div
            id="g_id_onload"
            data-client_id="{{ google_client_id }}"
            data-callback="handleCredentialResponse"
            data-auto_prompt="false">
          </div>

          <div class="g_id_signin d-flex justify-content-center"
              data-type="standard"
              data-theme="outline"
              data-size="large"
              data-width="100%">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="{% static 'js/google_auth.js' %}"></script>
{% endblock %}
